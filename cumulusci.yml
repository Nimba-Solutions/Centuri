minimum_cumulusci_version: "3.78.0"
project:
    name: Centuri
    package:
        name: Centuri
        api_version: "62.0"
    dependencies:
        # Required to satisfy the existing custom data model
        - version_id: 04tKX000000PxtGYAS # FSL
        - version_id: 04tKY000000Ts7yYAC # Youreka
        # Uncomment these as needed:
        # - version_id: 04t8b000001ZxNVAA0 # FlowActionsBasePack
        # - version_id: 04t5G000004fz9OQAQ # FlowScreenComponentsBasePack
        # - version_id: 04t5G000003zgYwQAI # quickLookup
        # - version_id: 04t5G000004fz9EQAQ # datatable

        # - version_id: 04t0b000001NxJWAA0 # MobileLandingNonEssentials
        # - version_id: 04t0b000001DkOeAAK # DreamForceTrials
        # - version_id: 04tJ6000000TnlFIAS # Elements for Salesforce

        # - version_id: 04t2E000001fDFTQA2 # Conga Batch
        # - version_id: 04t5w000005ujndAAA # Conga Composer
        # - version_id: 04t6S000001QXvvQAG # Conga Trigger

        # - version_id: 04t2K000000cfVgQAI # SDocs
        # - version_id: 04tDm00000051QgIAI # Data Fetcher
        # - version_id: 04t5p000001E8vdAAC # Declarative Lookup Rollup Summaries Tool
        # - version_id: 04ti0000000QzQyAAK # SocialCustomerService

        # - version_id: 04t30000001DUvrAAG # Salesforce Connected Apps
        # - version_id: 04t4V00000236XKQAY # Salesforce Mobile Apps
        # - version_id: 04tHq000000lsw7IAA # Salesforce Field Service App Package
        # - version_id: 04t50000000EcdrAAC # Salesforce.com CRM Dashboards
    git:
        default_branch: "main"
        prefix_feature: "feature/"
        prefix_beta: "beta/"
        prefix_release: "release/"
    source_format: sfdx

tasks:
    robot:
        options:
            suites: robot/Centuri/tests
            options:
                outputdir: robot/Centuri/results

    robot_testdoc:
        options:
            path: robot/Centuri/tests
            output: robot/Centuri/doc/Centuri_tests.html

    run_tests:
        options:
            required_org_code_coverage_percent: 75

    ensure_account_source_values:
        description: Ensures the required AccountSource values exist in the org
        class_path: cumulusci.tasks.metadata_etl.value_sets.AddValueSetEntries
        options:
            api_names: AccountSource
            entries:
                - fullName: Advertisement
                  label: Advertisement
                - fullName: Customer Event
                  label: Customer Event
                - fullName: Employee Referral
                  label: Employee Referral
                - fullName: Google AdWords
                  label: Google AdWords
                - fullName: Other
                  label: Other
                - fullName: Partner
                  label: Partner
                - fullName: Purchased List
                  label: Purchased List
                - fullName: Trade Show
                  label: Trade Show
                - fullName: Webinar
                  label: Webinar
                - fullName: Website
                  label: Website

    ensure_work_order_status_values:
        description: Ensures the required Work Order Status values exist in the org
        class_path: cumulusci.tasks.metadata_etl.value_sets.AddValueSetEntries
        options:
            api_names: WorkOrderStatus
            entries:
                - fullName: Open
                  label: Open
                - fullName: Ready
                  label: Ready
                - fullName: In Progress
                  label: In Progress
                - fullName: Complete
                  label: Complete
                - fullName: Canceled
                  label: Canceled
                - fullName: On Hold
                  label: On Hold

    ensure_address_type_values:
        description: Ensures the required Address Type values exist in the org
        class_path: cumulusci.tasks.metadata_etl.value_sets.AddValueSetEntries
        options:
            api_names: AddressType
            entries:
                - fullName: Billing
                  label: Billing
                - fullName: Mailing
                  label: Mailing
                - fullName: Shipping
                  label: Shipping
                - fullName: Home
                  label: Home
                - fullName: Work Site
                  label: Work Site

flows:
    dependencies:
        steps:
            0.1:
                task: ensure_account_source_values
            0.2:
                task: ensure_work_order_status_values
            0.3:
                task: ensure_address_type_values
